{
    "name": "update plugins Telegram",
    "isActive": "1",
    "group": "Gestion Plugins",
    "mode": "schedule",
    "schedule": "0 19 * * *",
    "trigger": [
        ""
    ],
    "timeout": "0",
    "isVisible": "0",
    "display": {
        "name": "",
        "icon": ""
    },
    "order": "9999",
    "description": "Scénario de mise à jour des plugins Jeedom depuis Telegram",
    "configuration": {
        "timeDependency": 0,
        "has_return": 0,
        "logmode": "default",
        "allowMultiInstance": "1",
        "syncmode": "0",
        "timeline::enable": "0",
        "timeline::folder": ""
    },
    "elements": [
        {
            "name": "",
            "type": "code",
            "options": [],
            "order": "0",
            "subElements": [
                {
                    "name": "",
                    "type": "code",
                    "subtype": "action",
                    "options": {
                        "collapse": "0",
                        "enable": "1"
                    },
                    "order": "0",
                    "expressions": [
                        {
                            "type": "code",
                            "subtype": "",
                            "expression": "\/* @noodom \/ Scénario de mise à jour des plugins Jeedom depuis Telegram\n\t- reprise d'une solution proposée sur Telegram \/ Community Jeedom\n\t- ajout de la gestion d'un menu de navigation pour le choix des mises à jours\n\nInstallation du menu : https:\/\/github.com\/noodom\/jeedom_scenarios\/blob\/master\/updatePlugins\/README.md\n\n*\/\n\n$tags = $scenario->getTags();\n\n$tags['#redCircle#'] = \"&\".\"#x1F534;\";\n$tags['#greenCircle#'] = \"&\".\"#x1F7E2;\";\n$tags['#greenCheck#'] = \"&\".\"#x2705;\";\n$tags['#whiteCheck#'] = \"&\".\"#x2611;\";\n$tags['#arrow#'] = \"&\".\"#x27A1;\";\n\n$messageUpdate = '';\n$nbUpdates = update::nbNeedUpdate();\n$jeedomUpdate = 0;\n\nif ( $nbUpdates == 0 ) {\n\t$scenario->setlog('0 update');\n}\nelse {\n    $messageUpdate .= 'Nombre de mises à jour de plugins disponibles : ' . $nbUpdates . \"\\n\\n\";  \n\n    foreach (update::all() as $update) {\n    \tif (strtolower($update->getStatus())!='update') continue;\n        if ($update->getConfiguration('doNotUpdate')==1 && $update->getType()!='core') continue;\n\n        $messageUpdate  .= $tags['#arrow#'].\" <u><b>\".(($update->getType() == 'core')?\"Core\":\"Plugin\").' : '.$update->getLogicalId().\"<\/b><\/u>\".\"\\n\";\n        $messageUpdate  .= $tags['#redCircle#'].' Version installée : ' .$update->getLocalVersion(). \"\\n\";\n        $messageUpdate  .= $tags['#greenCircle#'].' Version disponible : ' .$update->getRemoteVersion(). \"\\n\\n\";\n        $scenario->setlog($update->getType().':'.$update->getLogicalId().' - '.$update->getLocalVersion().'\/'.$update->getRemoteVersion());\n\n        if ($update->getType() == 'plugin') {\n          try {\n            $plugin = plugin::byId($update->getLogicalId());\n            $messageUpdate .= \"<a href='\".str_replace(' ', '%20', $plugin->getChangelog()).\"'>Changelog<\/a>  |  \";\n            $messageUpdate .= \"<a href='https:\/\/community.jeedom.com\/tags\/plugin-\".str_replace(' ', '%20', $plugin->getId()).\"'>Community<\/a>\" . \"\\n\\n\" ;\n            $scenario->setlog('changelog:'.$plugin->getChangelog());      \n            $scenario->setlog('community:https:\/\/community.jeedom.com\/tags\/plugin-'.$plugin->getId());\n          } catch (Exception $e) {\n\n          }\n        }\n      \n        if ($update->getType() == 'core') {\n          try {\n            \/\/ Récupere l'information du change Log pour chaque plugin\n            $messageUpdate  .= \"<a href='https:\/\/doc.jeedom.com\/fr_FR\/core\/4.1\/changelog'>Changelog<\/a>  |  \";\n            \/\/ On log un message\n            #$scenario->setlog('changelog:'.$plugin->getChangelog());\n            \/\/ Recupere l'information du community pour chaque plugin\n            $messageUpdate  .= \"<a href='https:\/\/community.jeedom.com\/search?q=\".$update->getRemoteVersion().\"'>Community<\/a>\" . \"\\n\\n\" ;\n            \/\/ On log un message\n            #$scenario->setlog('community:https:\/\/community.jeedom.com\/tags\/plugin-'.$plugin->getId());\n          } catch (Exception $e) {\n\n          }\n      \t}\n    }\n}\n\n$tags['#nbUpdates#'] = $nbUpdates;\n$tags['#msgUpdate#'] = $messageUpdate;\n$namescenario .= 'Exécuté par le scénario \"' .$scenario->getName().'\", le ' .date('d\/m\/Y');\n$tags['#nameScenario#'] = $namescenario;\n\n$scenario->setTags($tags);",
                            "options": [],
                            "order": "0"
                        }
                    ]
                }
            ]
        },
        {
            "name": "",
            "type": "if",
            "options": [],
            "order": "0",
            "subElements": [
                {
                    "name": "",
                    "type": "if",
                    "subtype": "condition",
                    "options": {
                        "collapse": "0",
                        "enable": "1",
                        "allowRepeatCondition": "0"
                    },
                    "order": "0",
                    "expressions": [
                        {
                            "type": "condition",
                            "subtype": "",
                            "expression": "tag(nbUpdates) > 0",
                            "options": [],
                            "order": "0"
                        }
                    ]
                },
                {
                    "name": "",
                    "type": "then",
                    "subtype": "action",
                    "options": [],
                    "order": "1",
                    "expressions": [
                        {
                            "type": "element",
                            "subtype": "",
                            "expression": "1197",
                            "options": [],
                            "order": "0",
                            "element": {
                                "name": "",
                                "type": "action",
                                "options": [],
                                "order": "0",
                                "subElements": [
                                    {
                                        "name": "",
                                        "type": "action",
                                        "subtype": "action",
                                        "options": {
                                            "collapse": "0",
                                            "enable": "1"
                                        },
                                        "order": "0",
                                        "expressions": [
                                            {
                                                "type": "action",
                                                "subtype": "",
                                                "expression": "#[Notifications][Telegram][Noodom]#",
                                                "options": {
                                                    "enable": "1",
                                                    "background": "0",
                                                    "title": "disable_web_page_preview=true",
                                                    "message": "<u><b>Gestion de la mise à jour des plugins Jeedom<\/b><\/u>\n\ntag(msgUpdate)tag(nameScenario)"
                                                },
                                                "order": "0"
                                            }
                                        ]
                                    }
                                ]
                            }
                        },
                        {
                            "type": "action",
                            "subtype": "",
                            "expression": "ask",
                            "options": {
                                "enable": "1",
                                "background": "0",
                                "question": "Faut-il mettre à jour des plugins ?",
                                "answer": "Oui;Non",
                                "variable": "askCentreMessage",
                                "timeout": "60",
                                "cmd": "#[Notifications][Telegram][Noodom]#"
                            },
                            "order": "1"
                        },
                        {
                            "type": "element",
                            "subtype": "",
                            "expression": "1198",
                            "options": [],
                            "order": "2",
                            "element": {
                                "name": "",
                                "type": "if",
                                "options": [],
                                "order": "0",
                                "subElements": [
                                    {
                                        "name": "",
                                        "type": "if",
                                        "subtype": "condition",
                                        "options": {
                                            "collapse": "0",
                                            "enable": "1",
                                            "allowRepeatCondition": "0"
                                        },
                                        "order": "0",
                                        "expressions": [
                                            {
                                                "type": "condition",
                                                "subtype": "",
                                                "expression": "strtolower(variable(askCentreMessage)) == \"oui\"",
                                                "options": [],
                                                "order": "0"
                                            }
                                        ]
                                    },
                                    {
                                        "name": "",
                                        "type": "then",
                                        "subtype": "action",
                                        "options": [],
                                        "order": "1",
                                        "expressions": [
                                            {
                                                "type": "element",
                                                "subtype": "",
                                                "expression": "1199",
                                                "options": [],
                                                "order": "0",
                                                "element": {
                                                    "name": "",
                                                    "type": "code",
                                                    "options": [],
                                                    "order": "0",
                                                    "subElements": [
                                                        {
                                                            "name": "",
                                                            "type": "code",
                                                            "subtype": "action",
                                                            "options": {
                                                                "collapse": "0",
                                                                "enable": "1"
                                                            },
                                                            "order": "0",
                                                            "expressions": [
                                                                {
                                                                    "type": "code",
                                                                    "subtype": "",
                                                                    "expression": "$tags = $scenario->getTags();\n\n\/\/ Parcours de tous les Updates\n$listUpdate = \"\";\nforeach (update::all() as $update) {\n\t$monUpdate = $update->getName();\n\t$statusUpdate = strtolower($update->getStatus());\n\t$configUpdate = $update->getConfiguration('doNotUpdate');\n\tif ($statusUpdate == \"update\" && $configUpdate == 0) {\n      \t$listUpdate .= $monUpdate.\";\";\n\t}\n}\n\n$tags['#listPluginsUpdate#'] = $tags['#whiteCheck#'].\" PLUGIN\".(($tags['#nbUpdates#']==1)?'':'S').\" A JOUR \".$tags['#whiteCheck#'].\"\\n\\n\"\n  .\" Mise à jour effectuée pour \".(($tags['#nbUpdates#']==1)?'le':'les').\" plugin\".(($tags['#nbUpdates#']==1)?'':'s').\" suivants :\".\"\\n\"\n  .\"\\n\".$tags['#greenCheck#'].\" <b>\".str_replace(';', \"<\/b>\\n\".$tags['#greenCheck#'].\" <b>\", trim($listUpdate, ';')).'<\/b>';\n$listUpdate .= \"Annuler\".\";\";\n$listUpdate .= \"Tous\";\n$scenario->setLog('listUpdate : '.$listUpdate);\n$tags['#listUpdate#'] = $listUpdate;\n\n$scenario->setTags($tags);\n",
                                                                    "options": [],
                                                                    "order": "0"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            },
                                            {
                                                "type": "action",
                                                "subtype": "",
                                                "expression": "ask",
                                                "options": {
                                                    "enable": "1",
                                                    "background": "0",
                                                    "question": "Quels plugins faut-il mettre à jour ?",
                                                    "answer": "answers_per_line=2;tag(listUpdate)",
                                                    "variable": "askCentreMessagePluginMAJ",
                                                    "timeout": "60",
                                                    "cmd": "#[Notifications][Telegram][Noodom]#"
                                                },
                                                "order": "1"
                                            },
                                            {
                                                "type": "element",
                                                "subtype": "",
                                                "expression": "1200",
                                                "options": [],
                                                "order": "2",
                                                "element": {
                                                    "name": "",
                                                    "type": "if",
                                                    "options": [],
                                                    "order": "0",
                                                    "subElements": [
                                                        {
                                                            "name": "",
                                                            "type": "if",
                                                            "subtype": "condition",
                                                            "options": {
                                                                "collapse": "0",
                                                                "enable": "1",
                                                                "allowRepeatCondition": "0"
                                                            },
                                                            "order": "0",
                                                            "expressions": [
                                                                {
                                                                    "type": "condition",
                                                                    "subtype": "",
                                                                    "expression": "strtolower(variable(askCentreMessagePluginMAJ)) == \"aucune réponse\" OU strtolower(variable(askCentreMessagePluginMAJ)) == \"annuler\"",
                                                                    "options": [],
                                                                    "order": "0"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "",
                                                            "type": "then",
                                                            "subtype": "action",
                                                            "options": [],
                                                            "order": "1",
                                                            "expressions": [
                                                                {
                                                                    "type": "action",
                                                                    "subtype": "",
                                                                    "expression": "#[Notifications][Telegram][Noodom]#",
                                                                    "options": {
                                                                        "enable": "1",
                                                                        "background": "0",
                                                                        "title": "empty=1",
                                                                        "message": "tag(whiteCheck) ANNULATION tag(whiteCheck)\n\ntag(redCircle) Demande de mise à jour annulée\n\ntag(nameScenario)"
                                                                    },
                                                                    "order": "0"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "",
                                                            "type": "else",
                                                            "subtype": "action",
                                                            "options": [],
                                                            "order": "2",
                                                            "expressions": [
                                                                {
                                                                    "type": "element",
                                                                    "subtype": "",
                                                                    "expression": "1201",
                                                                    "options": [],
                                                                    "order": "0",
                                                                    "element": {
                                                                        "name": "",
                                                                        "type": "if",
                                                                        "options": [],
                                                                        "order": "0",
                                                                        "subElements": [
                                                                            {
                                                                                "name": "",
                                                                                "type": "if",
                                                                                "subtype": "condition",
                                                                                "options": {
                                                                                    "collapse": "0",
                                                                                    "enable": "1",
                                                                                    "allowRepeatCondition": "0"
                                                                                },
                                                                                "order": "0",
                                                                                "expressions": [
                                                                                    {
                                                                                        "type": "condition",
                                                                                        "subtype": "",
                                                                                        "expression": "strtolower(variable(askCentreMessagePluginMAJ)) == \"tous\"",
                                                                                        "options": [],
                                                                                        "order": "0"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "name": "",
                                                                                "type": "then",
                                                                                "subtype": "action",
                                                                                "options": [],
                                                                                "order": "1",
                                                                                "expressions": [
                                                                                    {
                                                                                        "type": "element",
                                                                                        "subtype": "",
                                                                                        "expression": "1202",
                                                                                        "options": [],
                                                                                        "order": "0",
                                                                                        "element": {
                                                                                            "name": "",
                                                                                            "type": "code",
                                                                                            "options": [],
                                                                                            "order": "0",
                                                                                            "subElements": [
                                                                                                {
                                                                                                    "name": "",
                                                                                                    "type": "code",
                                                                                                    "subtype": "action",
                                                                                                    "options": {
                                                                                                        "collapse": "0",
                                                                                                        "enable": "1"
                                                                                                    },
                                                                                                    "order": "0",
                                                                                                    "expressions": [
                                                                                                        {
                                                                                                            "type": "code",
                                                                                                            "subtype": "",
                                                                                                            "expression": "foreach (update::all() as $update) {\n        $update->doUpdate();\n}\n",
                                                                                                            "options": [],
                                                                                                            "order": "0"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    },
                                                                                    {
                                                                                        "type": "action",
                                                                                        "subtype": "",
                                                                                        "expression": "#[Notifications][Telegram][Noodom]#",
                                                                                        "options": {
                                                                                            "enable": "1",
                                                                                            "background": "0",
                                                                                            "title": "empty=1",
                                                                                            "message": "tag(listPluginsUpdate)\n\ntag(nameScenario)"
                                                                                        },
                                                                                        "order": "1"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "name": "",
                                                                                "type": "else",
                                                                                "subtype": "action",
                                                                                "options": [],
                                                                                "order": "2",
                                                                                "expressions": [
                                                                                    {
                                                                                        "type": "element",
                                                                                        "subtype": "",
                                                                                        "expression": "1203",
                                                                                        "options": [],
                                                                                        "order": "0",
                                                                                        "element": {
                                                                                            "name": "",
                                                                                            "type": "code",
                                                                                            "options": [],
                                                                                            "order": "0",
                                                                                            "subElements": [
                                                                                                {
                                                                                                    "name": "",
                                                                                                    "type": "code",
                                                                                                    "subtype": "action",
                                                                                                    "options": {
                                                                                                        "collapse": "0",
                                                                                                        "enable": "1"
                                                                                                    },
                                                                                                    "order": "0",
                                                                                                    "expressions": [
                                                                                                        {
                                                                                                            "type": "code",
                                                                                                            "subtype": "",
                                                                                                            "expression": "$Variable_J = \"askCentreMessagePluginMAJ\";\n$tabJ = $scenario->getData($Variable_J);\n\n$nomUpdateRecherchee = $tabJ;\n$scenario->setLog('nomUpdateRecherchee : '.$nomUpdateRecherchee);\n\nforeach (update::all() as $update) {\n    $monUpdate = $update->getName();\n    if ($monUpdate == $nomUpdateRecherchee){\n        $update->doUpdate();\n    }\n}",
                                                                                                            "options": [],
                                                                                                            "order": "0"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    },
                                                                                    {
                                                                                        "type": "action",
                                                                                        "subtype": "",
                                                                                        "expression": "#[Notifications][Telegram][Noodom]#",
                                                                                        "options": {
                                                                                            "enable": "1",
                                                                                            "background": "0",
                                                                                            "title": "empty=1",
                                                                                            "message": "tag(whiteCheck) PLUGIN A JOUR tag(whiteCheck)\n\ntag(greenCheck) Mise à jour du plugin <b>variable(askCentreMessagePluginMAJ)<\/b> effectuée\n\ntag(nameScenario)"
                                                                                        },
                                                                                        "order": "1"
                                                                                    },
                                                                                    {
                                                                                        "type": "element",
                                                                                        "subtype": "",
                                                                                        "expression": "1204",
                                                                                        "options": [],
                                                                                        "order": "2",
                                                                                        "element": {
                                                                                            "name": "",
                                                                                            "type": "code",
                                                                                            "options": [],
                                                                                            "order": "0",
                                                                                            "subElements": [
                                                                                                {
                                                                                                    "name": "",
                                                                                                    "type": "code",
                                                                                                    "subtype": "action",
                                                                                                    "options": {
                                                                                                        "collapse": "0",
                                                                                                        "enable": "1"
                                                                                                    },
                                                                                                    "order": "0",
                                                                                                    "expressions": [
                                                                                                        {
                                                                                                            "type": "code",
                                                                                                            "subtype": "",
                                                                                                            "expression": "$tags = $scenario->getTags();\n\n$NbUpdates = update::nbNeedUpdate();\n$tags['#NbUpdates#'] = $NbUpdates;\n\n$scenario->setTags($tags);",
                                                                                                            "options": [],
                                                                                                            "order": "0"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    },
                                                                                    {
                                                                                        "type": "element",
                                                                                        "subtype": "",
                                                                                        "expression": "1205",
                                                                                        "options": [],
                                                                                        "order": "3",
                                                                                        "element": {
                                                                                            "name": "",
                                                                                            "type": "if",
                                                                                            "options": [],
                                                                                            "order": "0",
                                                                                            "subElements": [
                                                                                                {
                                                                                                    "name": "",
                                                                                                    "type": "if",
                                                                                                    "subtype": "condition",
                                                                                                    "options": {
                                                                                                        "collapse": "0",
                                                                                                        "enable": "1",
                                                                                                        "allowRepeatCondition": "0"
                                                                                                    },
                                                                                                    "order": "0",
                                                                                                    "expressions": [
                                                                                                        {
                                                                                                            "type": "condition",
                                                                                                            "subtype": "",
                                                                                                            "expression": "tag(NbUpdates) > 0",
                                                                                                            "options": [],
                                                                                                            "order": "0"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "name": "",
                                                                                                    "type": "then",
                                                                                                    "subtype": "action",
                                                                                                    "options": [],
                                                                                                    "order": "1",
                                                                                                    "expressions": [
                                                                                                        {
                                                                                                            "type": "action",
                                                                                                            "subtype": "",
                                                                                                            "expression": "ask",
                                                                                                            "options": {
                                                                                                                "enable": "1",
                                                                                                                "background": "0",
                                                                                                                "question": "Nouvelle vérification de mise à jour des plugins ?",
                                                                                                                "answer": "Oui;Non",
                                                                                                                "variable": "newCheck",
                                                                                                                "timeout": "60",
                                                                                                                "cmd": "#[Notifications][Telegram][Noodom]#"
                                                                                                            },
                                                                                                            "order": "0"
                                                                                                        },
                                                                                                        {
                                                                                                            "type": "element",
                                                                                                            "subtype": "",
                                                                                                            "expression": "1206",
                                                                                                            "options": [],
                                                                                                            "order": "1",
                                                                                                            "element": {
                                                                                                                "name": "",
                                                                                                                "type": "if",
                                                                                                                "options": [],
                                                                                                                "order": "0",
                                                                                                                "subElements": [
                                                                                                                    {
                                                                                                                        "name": "",
                                                                                                                        "type": "if",
                                                                                                                        "subtype": "condition",
                                                                                                                        "options": {
                                                                                                                            "collapse": "0",
                                                                                                                            "enable": "1",
                                                                                                                            "allowRepeatCondition": "0"
                                                                                                                        },
                                                                                                                        "order": "0",
                                                                                                                        "expressions": [
                                                                                                                            {
                                                                                                                                "type": "condition",
                                                                                                                                "subtype": "",
                                                                                                                                "expression": "strtolower(variable(newCheck)) == \"oui\"",
                                                                                                                                "options": [],
                                                                                                                                "order": "0"
                                                                                                                            }
                                                                                                                        ]
                                                                                                                    },
                                                                                                                    {
                                                                                                                        "name": "",
                                                                                                                        "type": "then",
                                                                                                                        "subtype": "action",
                                                                                                                        "options": [],
                                                                                                                        "order": "1",
                                                                                                                        "expressions": [
                                                                                                                            {
                                                                                                                                "type": "action",
                                                                                                                                "subtype": "",
                                                                                                                                "expression": "delete_variable",
                                                                                                                                "options": {
                                                                                                                                    "enable": "1",
                                                                                                                                    "background": "0",
                                                                                                                                    "name": "askCentreMessagePluginMAJ"
                                                                                                                                },
                                                                                                                                "order": "0"
                                                                                                                            },
                                                                                                                            {
                                                                                                                                "type": "action",
                                                                                                                                "subtype": "",
                                                                                                                                "expression": "delete_variable",
                                                                                                                                "options": {
                                                                                                                                    "enable": "1",
                                                                                                                                    "background": "0",
                                                                                                                                    "name": "newCheck"
                                                                                                                                },
                                                                                                                                "order": "1"
                                                                                                                            },
                                                                                                                            {
                                                                                                                                "type": "element",
                                                                                                                                "subtype": null,
                                                                                                                                "expression": "1218",
                                                                                                                                "options": [],
                                                                                                                                "order": "2",
                                                                                                                                "element": {
                                                                                                                                    "name": null,
                                                                                                                                    "type": "code",
                                                                                                                                    "options": [],
                                                                                                                                    "order": "0",
                                                                                                                                    "subElements": [
                                                                                                                                        {
                                                                                                                                            "name": null,
                                                                                                                                            "type": "code",
                                                                                                                                            "subtype": "action",
                                                                                                                                            "options": {
                                                                                                                                                "collapse": "0",
                                                                                                                                                "enable": "1"
                                                                                                                                            },
                                                                                                                                            "order": "0",
                                                                                                                                            "expressions": [
                                                                                                                                                {
                                                                                                                                                    "type": "code",
                                                                                                                                                    "subtype": null,
                                                                                                                                                    "expression": "$idScenarioUpdatePlugins = $scenario->getId();\n$scenarioExecution = scenario::byId($idScenarioUpdatePlugins);\n$scenarioExecution->launch();",
                                                                                                                                                    "options": [],
                                                                                                                                                    "order": "0"
                                                                                                                                                }
                                                                                                                                            ]
                                                                                                                                        }
                                                                                                                                    ]
                                                                                                                                }
                                                                                                                            }
                                                                                                                        ]
                                                                                                                    },
                                                                                                                    {
                                                                                                                        "name": "",
                                                                                                                        "type": "else",
                                                                                                                        "subtype": "action",
                                                                                                                        "options": [],
                                                                                                                        "order": "2",
                                                                                                                        "expressions": [
                                                                                                                            {
                                                                                                                                "type": "action",
                                                                                                                                "subtype": "",
                                                                                                                                "expression": "#[Notifications][Telegram][Noodom]#",
                                                                                                                                "options": {
                                                                                                                                    "enable": "1",
                                                                                                                                    "background": "0",
                                                                                                                                    "title": "empty=1",
                                                                                                                                    "message": "tag(whiteCheck) ARRET tag(whiteCheck)\n\ntag(redCircle) Mise à jour des plugins arrêtée\n\ntag(nameScenario)"
                                                                                                                                },
                                                                                                                                "order": "0"
                                                                                                                            }
                                                                                                                        ]
                                                                                                                    }
                                                                                                                ]
                                                                                                            }
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "name": "",
                                                                                                    "type": "else",
                                                                                                    "subtype": "action",
                                                                                                    "options": [],
                                                                                                    "order": "2",
                                                                                                    "expressions": []
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "name": "",
                                        "type": "else",
                                        "subtype": "action",
                                        "options": [],
                                        "order": "2",
                                        "expressions": [
                                            {
                                                "type": "action",
                                                "subtype": "",
                                                "expression": "#[Notifications][Telegram][Noodom]#",
                                                "options": {
                                                    "enable": "1",
                                                    "background": "0",
                                                    "title": "empty=1",
                                                    "message": "tag(whiteCheck) ANNULATION tag(whiteCheck)\n\ntag(redCircle) Mise à jour de plugins annulée\n\ntag(nameScenario)"
                                                },
                                                "order": "0"
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "",
                    "type": "else",
                    "subtype": "action",
                    "options": [],
                    "order": "2",
                    "expressions": []
                }
            ]
        }
    ]
}